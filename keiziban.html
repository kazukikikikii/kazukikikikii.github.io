<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>掲示板</title>
    <!--リセットCSS-->
    <link rel="stylesheet" href="https://unpkg.com/ress/dist/ress.min.css">
    <!--オリジナルCSS-->
    <link rel="stylesheet" href="css/keiziban-style.css">
</head>
<body>
    <header>
        <nav class="menu-bar">
                <button class="btn-menu"><img class="menu-img" src="images/menu3.png"></button>
                <ul class="main-nav" id="links">
                    <li><a href="homegamen.html">ホーム</a></li>
                    <li><a href="keiziban.html">掲示板</a></li>
                    <li><a href="avatarset.html">アバター</a></li>
                    <li><a href="osirase.html">お知らせ</a></li>
                    <li><a href="settei.html">設定</a></li>
                    <li><a href="index.html">ログアウト</a></li>
                </ul>
            </nav>
    </header>

    <h1 class="main-title">掲示板</h1>
    <section>
        <h2 class="sub-title">新規投稿</h2>
        <form id="postForm" action="#" method="POST">
            <div class="name-input">お名前 : <input type="text" id="name" name="name" placeholder="ココロ まもる"><br></div>
            <div class="text-input">本文
            <br>
            <textarea class="text-input-box" id="section" name="section" rows="3" placeholder="おはようございます！"></textarea><br></div>
            <div class="toukou"><button type="submit">投稿する</button></div>
        </form>
    </section>
    <section>
        <h2 class="itiran">投稿一覧</h2>
        <div class="postList" id="postList">
            <!-- 投稿が追加される要素 -->
        </div>
        <div class="rireki-kesu"><button id="clearPosts">履歴を消す</button></div>
    </section>

    <script>
        // ページ読み込み時に保存された投稿を表示する
        document.addEventListener('DOMContentLoaded', function() {
            displaySavedPosts();
        });

        // 投稿フォームが送信された時の処理
        document.getElementById('postForm').addEventListener('submit', function(event) {
            event.preventDefault(); // フォームのデフォルトの送信動作を防ぐ

            // 入力値を取得
            var name = document.getElementById('name').value;
            var section = document.getElementById('section').value;

            // 新しい投稿要素を作成
            var newPost = document.createElement('div');
            var postContent = '<strong>' + name + '</strong>: ' + section;
            newPost.innerHTML = postContent;

            // 投稿一覧に追加
            var postList = document.getElementById('postList');
            postList.appendChild(newPost);

            // 入力欄をクリア
            document.getElementById('name').value = '';
            document.getElementById('section').value = '';

            // 投稿内容をローカルストレージに保存する
            savePostToLocalStorage(name, section);
        });

        // 投稿内容をローカルストレージに保存する関数
        function savePostToLocalStorage(name, section) {
            var posts = JSON.parse(localStorage.getItem('posts')) || [];

            // 新しい投稿を追加
            posts.push({ name: name, section: section });

            // ローカルストレージに保存
            localStorage.setItem('posts', JSON.stringify(posts));
        }

        // 保存された投稿を表示する関数
        function displaySavedPosts() {
            var posts = JSON.parse(localStorage.getItem('posts')) || [];

            var postList = document.getElementById('postList');
            postList.innerHTML = ''; // 一旦リセット

            posts.forEach(function(post) {
                var postElement = document.createElement('div');
                var postContent = '<strong>' + post.name + '</strong>: ' + post.section;
                postElement.innerHTML = postContent;
                postList.appendChild(postElement);
            });
        }

        // 履歴を消すボタンのクリックイベント
        document.getElementById('clearPosts').addEventListener('click', function() {
            // ローカルストレージをクリア
            localStorage.removeItem('posts');

            // 投稿一覧をクリア
            var postList = document.getElementById('postList');
            postList.innerHTML = '';
        });
    </script>
    <section>
        <div class="koukou"><button onclick="location.href='keiziban2.html'">掲示板_高校生の相談所へ行く</button></div>
    </section>
    <br>
    <section>
        <div class="home"><button onclick="location.href='homegamen.html'">ホームへ戻る</button></div>
    </section>
    <script src="script-menu.js"></script>
    <script src="script-coler.js"></script>
</body>
</html>
